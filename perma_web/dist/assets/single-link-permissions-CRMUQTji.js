var o=require("./single-link.module"),t=require("./helpers/dom.helpers.js"),u=require("./helpers/api.module.js"),c=require("./helpers/general.helpers.js"),d=require("./helpers/link.helpers.js"),n="#updatePermalink",l="#cancelUpdatePermalink";function f(){window.location.href.indexOf("safari=1")>-1&&history.replaceState({},"",window.location.href.replace(/\??safari=1/,"")),t.toggleBtnDisable(n,!0),t.toggleBtnDisable(l,!0),v()}function v(){$(".edit-link").click(function(){return $(o.detailsButton).click(),!1}),$("button.darchive").click(function(){return g($(this)),!1}),$("input:file").change(function(){var e=$(this).val(),a=!e;t.toggleBtnDisable(l,a),t.toggleBtnDisable(n,a)}),$("button:reset").click(function(){t.toggleBtnDisable(l,!0),t.toggleBtnDisable(n,!0)}),$("#archive_upload_form").submit(function(e){e.preventDefault(),p()});var i={};$("#collapse-details").find("input").on("input propertychange change",function(){var e=$(this),a=e.attr("name");if(a!="file"&&e.val()!=i[a]){i[a]=e.val();var r=e.parents().find(`.${a}-save-status`);d.saveInput(archive.guid,e,r,a,()=>{setTimeout(function(){$(r).html("")},1e3)})}})}function p(){t.toggleBtnDisable(n,!0),t.toggleBtnDisable(l,!0);var i="/archives/"+archive.guid+"/",e={};e.file=$("#archive_upload_form").find(".file")[0].files[0];var a={contentType:!1,processData:!1};window.FormData?c.sendFormData("PATCH",i,e,a).done(function(r){location=location}):$("#upload-error").text("Your browser version does not allow for this action. Please use a more modern browser.")}function g(i){var e=i;if(!e.hasClass("disabled")){var a=e.text(),r=a.indexOf("Public")>-1,s=r?null:$('select[name="private_reason"]').val()||"user";e.addClass("disabled"),e.text("Updating ..."),u.request("PATCH","/archives/"+archive.guid+"/",{is_private:!r,private_reason:s},{success:function(){window.location.reload(!0)},error:function(h){e.removeClass("disabled"),e.text(a)}})}}f();
//# sourceMappingURL=single-link-permissions-CRMUQTji.js.map
